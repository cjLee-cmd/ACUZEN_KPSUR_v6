# 표 데이터 정의 (Table Data Definition)

> **문서 목적:** 이 문서는 한국 PSUR 보고서 생성을 위한 표(Table) 데이터 추출 컨텍스트를 정의합니다.
> 표 데이터는 구조화된 데이터로, 보고서 내 각종 표를 채우는 데 사용됩니다.

## 문서 구조 설명

각 데이터 항목은 다음 정보를 포함합니다:

- **Variable ID**: 템플릿에서 사용되는 변수 식별자
- **Variable Name**: 변수의 한글 명칭
- **Data Source**: 데이터 출처
- **Input Type**: 입력 유형
- **Generation Timing**: 생성 시점
- **Data Type**: 데이터 타입
- **데이터 추출 방법**: 데이터를 어떻게 가져와야 하는지 상세 설명
- **추가 지침**: 데이터 가공 및 처리 지침
- **예시**: 실제 데이터 예시

---

## 표 데이터 목록


### 1. [표2_연도별판매량]

**Variable ID:** `[표2]`  
**Variable Name:** 연도별판매량  
**Data Source:** [RAW3_시판후sales데이터] AND  [CS19_시판후노출count시작날짜] AND [CS19.1_시판후노출count종료날짜]  
**Input Type:** 본문정보입력  
**Generation Timing:** 매번  
**Data Type:** `text 및 table`  

#### 데이터 추출 방법

> **[지침]** [CS19_시판후노출count시작날짜]와 [CS19.1_시판후노출count종료날짜]를 고려해서 표의 맨상단 가로행인 연도가 정해진다. 예를들어, [CS19_시판후노출count시작날짜]는 2020년 6월 1일이고, [CS19.1_시판후노출count종료날짜]는 2025년 4월 31일이라고 한다면, 가로 행은 총 6칸이 만들어지고(총합계 제외), 연도는 총 2020년(6월~12월), 2021년, 2022년, 2023년, 2024년, 2025년(1월~4월) 라고 씌여지게 된다.

> **[지침]** 만약 예를들어, [CS19_시판후노출count시작날짜]는 2021년 1월 1일이고, [CS19.1_시판후노출count종료날짜]는 2025년 12월 31일이라고 한다면, 가로 행은 총 5칸이 만들어지고(총합계 제외), 연도는 총 2021년, 2022년, 2023년, 2024년, 2025년라고 씌여지게 된다. 이런 논리로 진행한다.

> **[지침]** 즉, 가로의 칸의 개수가 [CS19_시판후노출count시작날짜]와 [CS19.1_시판후노출count종료날짜]에 따라 결정된다.
> **[지침]** "[표2_연도별판매량]및[표3_연평균환자노출]_예시1" 파일이 template 같은거라서 먼저 이거를 보고 학습하고, 다른 예시들을 봐라.

#### 추가 지침

> **[지침]** 용법용량에 따라 몇정씩 먹는 약이면 'XX정'으로 표현되고, 주사제라서 vial로 파는 약이면 XX바이알 로 표현

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `
2. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---

### 2. [표3_연평균환자노출]

**Variable ID:** `[표3]`  
**Variable Name:** 연평균환자노출  
**Data Source:** [RAW3_시판후sales데이터] AND ([RAW1.1_최신첨부문서] OR [RAW2.1_용법용량])  
**Input Type:** 본문정보입력  
**Generation Timing:** 매번  
**Data Type:** `text 및 table`  

#### 데이터 추출 방법

> **[지침]** 먼저 해당 의약품에 DDD(Defined Daily Dose)가 없는 경우, [RAW 데이터]에서 어떻게 표2값을 채우는 걸 했는지 단계별로 계산하는 방법 예시를 알려줄께.
1. 데이터 추출
Excel 파일에서 직접 추출했습니다.

기간별 월별 데이터를 각 국가별로 B~H 컬럼에서 읽어 월합을 구했습니다.

예) 2020년 6월부터 12월까지 각 월별 한국, 일본, 대만, 말레이시아, 미국, 캐나다, 인도 판매량을 더해 월합을 산출.

기간별로 각각 총합을 계산했습니다.

2020년 6월~12월

2021년 전체 (1~12월)

2022년 전체 (1~12월)

2023년 전체 (1~12월)

2024년 전체 (1~12월)

2025년 1~4월

2. 판매량 총합 계산
각 기간 월별 판매량 합계를 누적하여 기간별 총 판매량을 산출했습니다.

전체 기간 2020년 6월 1일부터 2025년 4월 30일까지 총 59개월입니다.

시판후노출count시작날짜 부터 시판후노출count종료날짜까지의 전체 판매량은 약 30,015,165정이었습니다.

3. 연평균 판매량 계산


월평균 판매량
= 전체기간판매량/59*12

즉, 전체 판매기간 동안의 총합 판매량을 59개월로 나누고 12개월을 곱했습니다. 


연평균 판매량=508,731.61×12=6,104,779.32정/년


4. 연평균 환자 노출 산출
용법용량 내의 유지용량에 따라, 1일 사용량은 2정, 1명의 환자가 1년간 사용하는 양은 
2
×
365
=
730
2×365=730정으로 가정했습니다.

환자 노출은 연평균 판매량을 환자 1명당 연간 사용량으로 나누어 계산합니다.

연평균 환자 노출
=
연평균 판매량
환자 1명당 연간 사용량
=
6
,
104
,
779.32
730
≈
8
,
363
명
연평균 환자 노출= 
환자 1명당 연간 사용량
연평균 판매량
 = 
730
6,104,779.32
 ≈8,363"




#### 추가 지침

> **[지침]** 도입용량과 유지용량이 다를경우 보통 연평균 환자 노출은 유지용량을 기준으로 WHO가이드라인에 따라 계산해
> **[지침]** "[표2_연도별판매량]및[표3_연평균환자노출]_예시1" 파일이 template 같은거라서 먼저 이거를 보고 학습하고, 다른 예시들을 봐라.

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `
2. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---

### 3. [표5_신속보고내역]

**Variable ID:** `[표5]`  
**Variable Name:** 신속보고내역  
**Data Source:** [RAW12_국외신속보고LineListing]+[RAW13_국내신속보고LineListing]  
**Input Type:** 본문정보입력  
**Generation Timing:** 매번  
**Data Type:** `table`  

#### 데이터 추출 방법

#보고일자는 raw데이터 내의 보고완료일자 참고 (이때 해당 이상사례의 부서접수번호와 일치하는 부서접수번호의 보고완료일자를 가져와야 함.)
#관리번호는 raw데이터 내의 부서접수번호 참고 
#이상사례명에는 raw데이터 내의 이상사례 명 참고 (이때, 한국어 영어 모두 있다면 모두 기재) 
# 비고에는 raw 데이터내의 "무효화" 가 기재되어 있는 경우 해당 건 기재.

#### 추가 지침


#신속보고로는 국내에서 발생한 사례의 신속보고와 국외에서 발생한 사례의 신속보고가 있는데 어떤 고객사는 이 자료를 각각 따로 줄 수도 있고, 어떤 고객사는 이 리스트를 함께 합쳐서 줄수도 있어. 일단 따로 준다고 가정하고 말을 한다면, [RAW12_국외신속보고LineListing]와 [RAW13_국내신속보고LineListing]의 두가지 Linelisting을 모두 합쳐서 표현을 해야 하기때문에 두개를 합쳐. 
> **[지침]** 그다음에 그 Linelisting의 시트, 행과 열, 컬럼을 먼저 파악하고, 보고일자/관리번호/이상사례명/비고에 해당하는 정보를 가져와야함. (참고로 비고에는 특이사항이 기재되므로, 기재될 일이 거의 없긴 함. )
> **[지침]** 관리번호 정보를 가져오기 위해서 [RAW 데이터]를 보면, 부서접수번호(KAERS 안전원관리번호), 고유식별 보고자관리번호 두가지 정보가 있을 것임. 이 중에 부서접수번호는 식약처에서 부여한 고유 식별번호이고, 고유식별 보고자 관리번호는 회사가 자체 부여한 식별번호임. 둘 다 정보가 있다면 데이터가 어떤 접수번호 기준으로 모두 나열되었는지 파악하는 게 우선임. 예를 들어 환자정보에는 고유식별보고자 관리번호가 있지만, 의약품정보에는 고유식별 보고자 관리번호가 없다면, 식약처가 부여한 "부서접수번호"를 기준으로 가져와야함.
#LineListing 자료를 파악할 때의 규칙은 먼저 시트를 파악하고, 해당 시트의 행과 열을 파악한 뒤에. 어디에 event listing이 있는지를 봐야해. event라 함은 이상사례인데 medDRA PT term, LLT term 등으로 이상사례가 나열되어 있어. 우리는 PT term을 기준으로 이상사례를 기술할꺼야. 엑셀 시트 중에 환자정보나 의약품product정보는 이 표에 활용되지 않는 정보야.  이 표에서 필요한 정보가 무엇인지 정확히 파악하고, 엑셀시트내에서 필요한 정보만 선별해서 가져오는 것이 중요해.
# 라인리스팅의 각 컬럼에 대한 설명과 시트별 연결규칙은 "참고자료4_원시자료코드집"와 참고자료5_의약품부작용보고원시자료 이용지침서(제조수입업체용)을 참고해.  

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---

### 4. [표6_정기보고내역]

**Variable ID:** `[표6]`  
**Variable Name:** 정기보고내역  
**Data Source:** [RAW15_정기보고LineListing]  
**Input Type:** 본문정보입력  
**Generation Timing:** 매번  
**Data Type:** `table`  

#### 데이터 추출 방법

#보고일자는 raw데이터 내의 보고완료일자 참고 (이때 해당 이상사례의 부서접수번호와 일치하는 부서접수번호의 보고완료일자를 가져와야 함.)
#관리번호는 raw데이터 내의 부서접수번호 참고 
#이상사례명에는 raw데이터 내의 이상사례 명 참고 (이때, 한국어 영어 모두 있다면 모두 기재) 

#### 추가 지침

#[RAW15_정기보고LineListing]의 시트, 행과 열, 컬럼을 먼저 파악하고, 보고일자/관리번호/이상사례명/비고에 해당하는 정보를 가져와야함.
> **[지침]** 그다음에 그 Linelisting의 시트, 행과 열, 컬럼을 먼저 파악하고, 보고일자/관리번호/이상사례명/비고에 해당하는 정보를 가져와야함. (참고로 비고에는 특이사항이 기재되므로, 기재될 일이 거의 없긴 함. )
> **[지침]** 관리번호 정보를 가져오기 위해서 [RAW 데이터]를 보면, 부서접수번호(KAERS 안전원관리번호), 고유식별 보고자관리번호 두가지 정보가 있을 것임. 이 중에 부서접수번호는 식약처에서 부여한 고유 식별번호이고, 고유식별 보고자 관리번호는 회사가 자체 부여한 식별번호임. 둘 다 정보가 있다면 데이터가 어떤 접수번호 기준으로 모두 나열되었는지 파악하는 게 우선임. 예를 들어 환자정보에는 고유식별보고자 관리번호가 있지만, 의약품정보에는 고유식별 보고자 관리번호가 없다면, 식약처가 부여한 "부서접수번호"를 기준으로 가져와야함.
#LineListing 자료를 파악할 때의 규칙은 먼저 시트를 파악하고, 해당 시트의 행과 열을 파악한 뒤에. 어디에 event listing이 있는지를 봐야해. event라 함은 이상사례인데 medDRA PT term, LLT term 등으로 이상사례가 나열되어 있어. 우리는 PT term을 기준으로 이상사례를 기술할꺼야. 엑셀 시트 중에 환자정보나 의약품product정보는 이 표에 활용되지 않는 정보야.  이 표에서 필요한 정보가 무엇인지 정확히 파악하고, 엑셀시트내에서 필요한 정보만 선별해서 가져오는 것이 중요해. 
# 라인리스팅의 각 컬럼에 대한 설명과 시트별 연결규칙은 "참고자료4_원시자료코드집"와 참고자료5_의약품부작용보고원시자료 이용지침서(제조수입업체용)을 참고해.  

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---

### 5. [표7_원시자료내역]

**Variable ID:** `[표7]`  
**Variable Name:** 원시자료내역  
**Data Source:** [Raw14_원시자료LineListing]  
**Input Type:**   
**Generation Timing:**   
**Data Type:** `table`  

#### 데이터 추출 방법

#보고일자는 raw데이터 내의 보고완료일자 참고 (이때 해당 이상사례의 부서접수번호와 일치하는 부서접수번호의 보고완료일자를 가져와야 함.)
#관리번호는 raw데이터 내의 부서접수번호 참고 
#이상사례명에는 raw데이터 내의 이상사례 명 참고 (이때, 한국어 영어 모두 있다면 모두 기재) 

#### 추가 지침


#[Raw14_원시자료LineListing]의 시트, 행과 열, 컬럼을 먼저 파악하고, 보고일자/관리번호/이상사례명/비고에 해당하는 정보를 가져와야함.
> **[지침]** 그다음에 그 Linelisting의 시트, 행과 열, 컬럼을 먼저 파악하고, 보고일자/관리번호/이상사례명/비고에 해당하는 정보를 가져와야함. (참고로 비고에는 특이사항이 기재되므로, 기재될 일이 거의 없긴 함. )
> **[지침]** 관리번호 정보를 가져오기 위해서 [RAW 데이터]를 보면, 부서접수번호(KAERS 안전원관리번호), 고유식별 보고자관리번호 두가지 정보가 있을 것임. 이 중에 부서접수번호는 식약처에서 부여한 고유 식별번호이고, 고유식별 보고자 관리번호는 회사가 자체 부여한 식별번호임. 둘 다 정보가 있다면 데이터가 어떤 접수번호 기준으로 모두 나열되었는지 파악하는 게 우선임. 예를 들어 환자정보에는 고유식별보고자 관리번호가 있지만, 의약품정보에는 고유식별 보고자 관리번호가 없다면, 식약처가 부여한 "부서접수번호"를 기준으로 가져와야함.
#LineListing 자료를 파악할 때의 규칙은 먼저 시트를 파악하고, 해당 시트의 행과 열을 파악한 뒤에. 어디에 event listing이 있는지를 봐야해. event라 함은 이상사례인데 medDRA PT term, LLT term 등으로 이상사례가 나열되어 있어. 우리는 PT term을 기준으로 이상사례를 기술할꺼야. 엑셀 시트 중에 환자정보나 의약품product정보는 이 표에 활용되지 않는 정보야.  이 표에서 필요한 정보가 무엇인지 정확히 파악하고, 엑셀시트내에서 필요한 정보만 선별해서 가져오는 것이 중요해.
# 라인리스팅의 각 컬럼에 대한 설명과 시트별 연결규칙은 "참고자료4_원시자료코드집"와 참고자료5_의약품부작용보고원시자료 이용지침서(제조수입업체용)을 참고해.   

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---

### 6. [표 8. 모든이상사례건수]

**Variable ID:** `[표 8. 모든이상사례건수]`  
**Variable Name:**   
**Data Source:** RAW데이터에 있는 모든 이상사례 Line listing 예를 들어, [RAW12_국외신속보고LineListing],[RAW13_국내신속보고LineListing],[RAW15_정기보고LineListing],[Raw14_원시자료LineListing]  
**Input Type:** 본문정보입력  
**Generation Timing:** 매번  
**Data Type:** `table`  

#### 데이터 추출 방법

#실무에서하는 방법.정기보고,신속보고,원시보고에 해당하는 line listing들을 모두 합한뒤( 예,  [RAW12_국외신속보고LineListing],[RAW13_국내신속보고LineListing],[RAW15_정기보고LineListing],[Raw14_원시자료LineListing]) ,  이렇게 합한 linelisting에서 피벗 테이블을 만든다. 그리고 중대한과 중대하지 않음으로 나눈다. 그리고 숫자를 센다. 
> **[지침]** 1.어떤 고객사는 해당 linelisting에 Seriousness 컬럼에 yes/no를 표시해 주는데, 이때에는 seriousness yes인 event들만 숫자를 센다. 이때, case seriousness와 event seriousness가 둘다 있는 경우 event seriousness를 따른다.
> **[지침]** 2. 어떤 고객사는 해당 linelisting에 별도로 seriousness컬럼이 없고, 사망을 초래/ 생명을 위협 /입원 또는 입원기간의 연장이 필요 /지속적 또는 중대한 장애나 기능저하 초래 /선천적 기형 또는 이상을 초래 /기타 의학적으로 중요한 상황이 발생하여 치료 필요/ 이러한 컬럼들이 있다. 이런경우 이들 중에 하나라도 "예"라고 체크되어있는 경우. 이 event는 serious(중대한)이기 때문에 이것들만 filter를 해서 중대한 event개수를 센다. 그리고 아무것도 예라고 표시 안되어있는 경우는 중대하지 않음 event로 센다.
> **[지침]** 검증할때는 중대한+중대하지 않음 event의 합이 전체 event숫자와 일치하는지 본다.

#### 추가 지침

> **[지침]** count 나 계산 엄격하게 2중 검증 필요

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---

### 7. [표9_SOC별건수]

**Variable ID:** `[표9]`  
**Variable Name:** SOC별건수  
**Data Source:** RAW데이터에 있는 모든 이상사례 Line listing 예를 들어, [RAW12_국외신속보고LineListing],[RAW13_국내신속보고LineListing],[RAW15_정기보고LineListing],[Raw14_원시자료LineListing]  
**Input Type:** 본문정보입력  
**Generation Timing:** 매번  
**Data Type:** `table`  

#### 데이터 추출 방법

#실무에서 사람이 직접하는 방법 기준으로 알려줄께. 
step1. 약물감시담당자는 RAW데이터 중의 모든 LineListing을 모아서 한개의 LineListing을 만들어. 왜냐하면 이 표9_SOC별건수 는 지금까지 모은 모든 이상사례를 분석하는 표이기 때문이야. 
step2. 그런뒤에, 엑셀의 피벗테이블 만들기 기준으로 Event(이상사례)의 MedDRA SOC, MedDRA PT term을 기준으로 세로 행 값을 만들어. 그리고 가로 열 값으로는 중대함, 중대하지않음 으로 나눠서 나열해. 
step 3 그리고 해당 SOC또는 PT의 중대한사례+중대하지않은 사례를 모두 더해서 "총 누적(건)" 값에 기재하는 거야. 
step4. 가장 마지막 행에는  Total이라고 되어있는데 이 행에는, 모든 중대한 모든 PT를 다 더했을 때의 값, 중대하지 않은 모든 PT를 다 더햇을 때 값, 중대하거나 중대하지 않은 모든 PT를 다 더했을 때 값이 들어가. 
step5. 가장 마지막 열에는 "허가사항 반영여부"가 있는데 , 여기는 해당 PT가 RAW2_사용상의주의사항 에 기재되어있는지 아닌지를 기재하는 섹션이야. 해당 PT가 사용상의 주의사항에 기재되어 있다면 "기반영"되어있는거지. 

#### 추가 지침

> **[지침]** count 나 계산 엄격하게 2중 검증 필요

#### 예시

1. `별도 워드 문서 예시 참고 (제목으로 해당요소의 예시 몇번인지 알 수 있음) `

---
